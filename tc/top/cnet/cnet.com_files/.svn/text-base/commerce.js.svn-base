//dbugScripts - will include non-compressed versions of this code if "jsdebug=true" is in the url of this page,
//otherwise it will execute this code.
//example: dbugScripts("/the/location/of/my/scripts/",["script1.js","script2.js","etc"])
//returns true if scripts are included, otherwise false.
if(!dbugScripts("http://c18-x-publish1.cnet.com:8100/html/rb/js/commerce/cat/",["commerce.global.framework.js", "cnetHistoryBarEnvirons.js"])){

/*	begin packed code	*/
var MultipleOpenAccordion=Fx.Elements.extend({options:{openAll:true,allowMultipleOpen:true,firstElementsOpen:[0],start:'open-first',fixedHeight:false,fixedWidth:false,alwaysHide:true,wait:false,onActive:Class.empty,onBackground:Class.empty,height:true,opacity:true,width:false},initialize:function(togglers,elements,options){this.parent(elements,options);this.setOptions(options);this.previousClick=null;this.elementsVisible=[];togglers.each(function(tog,i){$(tog).addEvent('click',function(){this.toggleSection(i)}.bind(this))},this);this.togglers=togglers;this.h={};this.w={};this.o={};this.now=[];this.elements.each(function(el,i){el=$(el);this.now[i]={};el.setStyle('overflow','hidden');if(!(this.options.openAll&&this.options.allowMultipleOpen))el.setStyle('height',0)},this);if(!this.options.openAll||!this.options.allowMultipleOpen){switch(this.options.start){case'first-open':this.showSection(this.options.firstElementsOpen[0]);break;case'open-first':this.toggleSection(this.options.firstElementsOpen[0]);break}}if(this.options.openAll&&this.options.allowMultipleOpen)this.showAll();else if(this.options.allowMultipleOpen)this.openSections(this.options.firstElementsOpen)},hideThis:function(i){this.elementsVisible[i]=false;if(this.options.height)this.h={'height':[this.elements[i].offsetHeight,0]};if(this.options.width)this.w={'width':[this.elements[i].offsetWidth,0]};if(this.options.opacity)this.o={'opacity':[this.now[i]['opacity']||1,0]};this.fireEvent("onBackground",[this.togglers[i],this.elements[i]])},showThis:function(i){this.elementsVisible[i]=true;if(this.options.height)this.h={'height':[this.elements[i].offsetHeight,this.options.fixedHeight||this.elements[i].scrollHeight]};if(this.options.width)this.w={'width':[this.elements[i].offsetWidth,this.options.fixedWidth||this.elements[i].scrollWidth]};if(this.options.opacity)this.o={'opacity':[this.now[i]['opacity']||0,1]};this.fireEvent("onActive",[this.togglers[i],this.elements[i]])},toggleSection:function(iToToggle){if(iToToggle!=this.previousClick||this.options.alwaysHide||this.options.allowMultipleOpen){this.previousClick=iToToggle;var objObjs={};var err=false;this.elements.each(function(el,i){var update=false;this.now[i]=this.now[i]||{};if(i==iToToggle){if(this.elementsVisible[i]&&(this.options.allowMultipleOpen||this.options.alwaysHide)){if(!(this.options.wait&&this.timer)){update=true;this.hideThis(i)}else{this.previousClick=null;err=true}}else if(!this.elementsVisible[i]){if(!(this.options.wait&&this.timer)){update=true;this.showThis(i)}else{this.previousClick=null;err=true}}}else if(this.elementsVisible[i]&&!this.options.allowMultipleOpen){if(!(this.options.wait&&this.timer)){update=true;this.hideThis(i)}else{this.previousClick=null;err=true}}if(update)objObjs[i]=$merge(this.h,$merge(this.o,this.w))},this);if(err)return false;return this.custom(objObjs)}return false},showSection:function(i,useFx){if($pick(useFx,false)){if(!this.elementsVisible[i])this.toggleSection(i)}else{this.setSectionStyle(i,$(this.elements[i]).scrollWidth,$(this.elements[i]).scrollHeight,1);this.elementsVisible[i]=true;this.fireEvent("onActive",[this.togglers[i],this.elements[i]])}},hideSection:function(i,useFx){if($pick(useFx,false)){if(this.elementsVisible[i])this.toggleSection(i)}else{this.setSectionStyle(i,0,0,0);this.elementsVisible[i]=false;this.fireEvent("onBackground",[this.togglers[i],this.elements[i]])}},setSectionStyle:function(i,w,h,o){if(this.options.opacity)$(this.elements[i]).setOpacity(o);if(this.options.height)$(this.elements[i]).setStyle('height',h+'px');if(this.options.width)$(this.elements[i]).setStyle('width',w+'px')},showAll:function(){if(this.options.allowMultipleOpen){this.elements.each(function(el,idx){this.showSection(idx,false)},this)}},hideAll:function(){if(this.options.allowMultipleOpen){this.elements.each(function(el,idx){this.hideSection(idx,false)},this)}},openSections:function(sections){if(this.options.allowMultipleOpen){this.elements.each(function(el,idx){if(sections.test(idx))this.showSection(idx,false);else this.hideSection(idx,false)},this)}}});MultipleOpenAccordion.implement(new Options);MultipleOpenAccordion.implement(new Events);var CNETNavAccordion=new Class({initialize:function(options){try{this.setOptions({openAll:false,allowMultipleOpen:true,defaultOpenIndexes:[0],defaultOpenClassName:'forceOpen',allowCookie:false,cookieName:false,cookieDuration:999,stretchToggleSelector:'div.xNavGrp div.btn',stretcherSelector:'div.xNavGrp ul'},options);var start=(this.options.openAll)?'first-open':'open-first';if(this.options.allowCookie&&this.options.cookieName&&this.getPref())this.options.defaultOpenIndexes=this.getPref();var toggles=$$(this.options.stretchToggleSelector);var stretchers=$$(this.options.stretcherSelector);if(toggles&&stretchers){var forceOpen=toggles.filter(function(t,i){return t.hasClass(this.options.defaultOpenClassName)},this);forceOpen.extend(this.options.defaultOpenIndexes);this.Accordion=new MultipleOpenAccordion(toggles,stretchers,{openAll:this.options.openAll,allowMultipleOpen:this.options.allowMultipleOpen,firstElementsOpen:forceOpen,start:start})}}catch(e){dbug.log('nav accordion error: %s',e)}},savePref:function(iToShow){Cookie.set(Json.toString(this.options.cookieName),iToShow,{duration:cookieDuration})},getPref:function(){return Json.evaluate(Cookie.get(this.options.cookieName))}});CNETNavAccordion.implement(new Options);CNETNavAccordion.implement(new Events);var CNETcarousel=new Class({initialize:function(container,options){this.container=$(container);if(!this.container.hasClass('hasCarousel')){this.container.addClass('hasCarousel');this.slides=[];this.buttons=[];this.setOptions({onRotate:Class.empty,onStop:Class.empty,onAutoPlay:Class.empty,onShowSlide:Class.empty,slidesSelector:".slide",buttonsSelector:".button",slideInterval:4000,transitionDuration:700,startIndex:0,buttonOnClass:"selected",buttonOffClass:"off",rotateAction:"none",rotateActionDuration:100,autoplay:true},options);this.slides=$(container).getElements(this.options.slidesSelector);this.buttons=$(container).getElements(this.options.buttonsSelector);this.createFx();this.showSlide(this.options.startIndex);if(this.options.autoplay)this.autoplay();if(this.options.rotateAction!='none')this.setupAction(this.options.rotateAction);return this}else return false},setupAction:function(action){this.buttons.each(function(el,idx){$(el).addEvent(action,function(){this.slideFx.setOptions(this.slideFx.options,{duration:this.options.rotateActionDuration});if(this.currentSlide!=idx)this.showSlide(idx);this.stop()}.bind(this))},this)},createFx:function(){this.slideFx=new Fx.Elements(this.slides,{duration:this.options.transitionDuration});this.slides.each(function(slide){slide.setStyle('opacity',0)})},showSlide:function(slideIndex){var action={};this.slides.each(function(slide,index){if(index==slideIndex&&index!=this.currentSlide){$(this.buttons[index]).removeClass(this.options.buttonOffClass).addClass(this.options.buttonOnClass);action[index.toString()]={'opacity':[1]}}else{$(this.buttons[index]).removeClass(this.options.buttonOnClass).addClass(this.options.buttonOffClass);action[index.toString()]={'opacity':[0]}}},this);this.fireEvent('onShowSlide',slideIndex);this.currentSlide=slideIndex;this.slideFx.start(action)},autoplay:function(){this.createFx();this.slideshowInt=this.rotate.periodical(this.options.slideInterval,this);this.fireEvent('onAutoPlay')},stop:function(){clearInterval(this.slideshowInt);this.fireEvent('onStop')},rotate:function(){current=this.currentSlide;next=(current+1>=this.slides.length)?0:current+1;this.showSlide(next);this.fireEvent('onRotate')},show:function(){$(this.options.carouselContainer).setStyle('visibility','visible');if(!$(this.options.carouselContainer).isVisible())$(this.options.carouselContainer).setStyle('display','block')},hide:function(){$(this.options.carouselContainer).setStyle('visibility','hidden')}});CNETcarousel.implement(new Options);CNETcarousel.implement(new Events);var CNETcarouselWithButtons=CNETcarousel.extend({initialize:function(el,options){this.parent(el,$merge({bubbleButtonBGImgSelector:'.bbg',buttonOnGifSrc:'cnet.com_files/green_button.gif',buttonOffGifSrc:'cnet.com_files/gray_button.gif'},options))},showSlide:function(slideIndex){this.buttons.each(function(button,index){$(button).getElement(this.options.bubbleButtonBGImgSelector).src=(index==slideIndex)?this.options.buttonOnGifSrc:this.options.buttonOffGifSrc},this);this.parent(slideIndex)}});var carousel=null;window.addEvent('domready',function(){if($('Carousel')){carousel=new CNETcarouselWithButtons($('Carousel'),{buttonsSelector:'.bubble',rotateAction:'mouseover'})}});var Jlogger=new Class({options:{ctype:false,cval:false,tag:false,element:false,event:false,useraction:false,fireOnce:false,executeNow:false,onPing:Class.empty},errors:0,fired:false,active:true,initialize:function(options){var defaults=(typeof PageVars!="undefined")?{ontid:PageVars.nodeId,siteId:PageVars.siteId,asId:PageVars.assetId,ptId:PageVars.pageType,edId:PageVars.editionId}:{};this.setOptions(defaults,options);if(this.options.element=='window')this.options.element=window;this.setup();if(this.options.executeNow)this.ping()},setup:function(){if(!$(this.options.element))return;var opt=this.options;if($type(opt.tag)&&$type(opt.element)&&$type(opt.event)){dbug.log('event observe(element: '+opt.element+', event: '+opt.event+', tag: '+opt.tag+')');if(opt.event=='load'&&opt.element==window)opt.executeNow=true;if(opt.element!=window)$(opt.element).addEvent(opt.event,this.ping.bind(this));else if(opt.event!='load')$(opt.element).addEvent(opt.event,this.ping.bind(this))}},makeURL:function(tag){var url='http://dw.com.com/redir?';var opt=this.options;if($type(opt.ontid))url+='ontid='+opt.ontid+'&';if($type(opt.siteId))url+='siteid='+opt.siteId+'&';if($type(opt.asId))url+='asId='+opt.asId+'&';if($type(opt.ptId))url+='ptId='+opt.ptId+'&';if($type(opt.edId))url+='edId='+opt.edId+'&';if($type(opt.ctype))url+='ctype='+opt.ctype+'&';if($type(opt.cval))url+='cval='+opt.cval+'&';if($type(opt.useraction))url+='useraction='+opt.useraction+'&';url+='tag='+opt.tag+'&destUrl=/i/b.gif';url+='&uniquePingId='+new Date().getTime();return url},ping:function(url,force){if(force||(((!this.fired&&this.options.fireOnce)||!this.options.fireOnce)&&this.active)){url=($type(url)!='string'||url.length==0)?this.makeURL():url;window.addEvent('domready',function(){new Element('img').setProperty('src',url);this.fired=true;dbug.log(this.options.tag+': '+(this.options.event||'')+'\nping: '+url);this.fireEvent('onPing')}.bind(this))}},pingTag:function(tag,force){this.ping(this.makeURL(tag),force)},stopObserving:function(){this.active=false},startObserving:function(){this.active=true}});Jlogger.implement(new Events);Jlogger.implement(new Options);var jlogger=Jlogger;var JlScroller=Jlogger.extend({setup:function(){if($type(this.options.tag)&&$type(this.options.event)&&this.options.event=="scrollTo"){dbug.log('event observe(element: '+this.options.element+', event: '+this.options.event+', tag: '+this.options.tag+', scrollTo: '+this.options.scrollTo+')');this.setUpScrollTo()}else this.parent()},setUpScrollTo:function(){var top=-1;var bottom=-1;try{if($type(this.options.scrollTo.top)&&this.options.scrollTo.top.toInt)top=this.options.scrollTo.top.toInt();else if($type(this.options.scrollTo.top))top=$(this.options.scrollTo.top).getTop();tmpTop=top;if($type(this.options.scrollTo.bottom)){if(top==-1&&!$chk(parseInt(this.options.scrollTo.bottom)))top=$(this.options.scrollTo.bottom).getTop();if(this.options.scrollTo.bottom==this.options.scrollTo.top||!$type(this.options.scrollTo.top))bottom=$(this.options.scrollTo.bottom).getStyle('height').toInt()+top;else if($chk(parseInt(this.options.scrollTo.bottom))&&tmpTop>=0)bottom=tmpTop+this.options.scrollTo.bottom;else if($chk(parseInt(this.options.scrollTo.bottom)))bottom=this.options.scrollTo.bottom;else bottom=$(this.options.scrollTo.bottom).getTop()}else bottom=top;top=tmpTop;if(top<0)top=bottom;dbug.log("new tripwire (%s): top: %s, bottom: %s",this.options.tag,top,bottom);if(top>=0&&bottom>=0){window.addEvent('scroll',this.isOnScreen.bind(this,[top,bottom]));this.isOnScreen(top,bottom)}}catch(e){if(this.errors<10){dbug.log('JlScroller error: %o, attempt #: %s',e,this.errors);this.errors++;this.setUpScrollTo.delay(20)}else dbug.log('giving up attempt to set up instance of JlScroller for %s',this.options.tag)}},isOnScreen:function(top,bottom){var dim=this.getScreenDimensions();var scroll=this.getScrollOffset();try{if((top>scroll.y&&top<scroll.y+dim.h)||(bottom>scroll.y&&bottom<scroll.y+dim.h)){if(!this.fired)this.ping()}else if(this.fired&&!this.options.fireOnce)this.fired=false}catch(e){dbug.log("isOnScreen error: %s",e)}},getScreenDimensions:function(){return{w:window.getWidth(),h:window.getHeight()}},getScrollOffset:function(){return{x:window.getScrollLeft(),y:window.getScrollTop()}}});var jlScroller=JlScroller;var RandomValueCookieMaker=new Class({options:{cookieName:false,limit:10,days:999,domain:false},initialize:function(options){this.setOptions(options);if(this.options.cookieName)this.verify();else{dbug.log('you must specify a cookie name.');return}},verify:function(){this.val=Cookie.get(this.options.cookieName);if(!$chk(parseInt(this.val))){this.val=this.makeRand();this.saveVal()}},saveVal:function(val){this.val=$pick(val,this.val);if(this.options.domain)Cookie.set(this.options.cookieName,this.val,{duration:this.options.days,domain:this.options.domain});else Cookie.set(this.options.cookieName,this.val,this.options.days)},makeSeed:function(){return((new Date().getTime()*9301+49297)%233280)/(233280.0)},makeRand:function(){return Math.ceil(this.makeSeed()*this.options.limit)}});RandomValueCookieMaker.implement(new Options);var randomValueCookieMaker=RandomValueCookieMaker;var jLogRandCookie=new RandomValueCookieMaker({cookieName:"jLogRandCookie",limit:10,days:60});if(window.location.href.indexOf("jLog=true")>0)jLogRandCookie.saveVal(11);if(window.location.href.indexOf("jLog=false")>0)jLogRandCookie.saveVal(1);dbug.log("jLogRandCookie: %s, firefox: %s",jLogRandCookie.val,window.gecko);if(window.gecko&&jLogRandCookie.val>5){window.addEvent('domready',function(){if(PageVars.pageType==4505){try{new Jlogger({tag:'jlWinload_4505'}).ping()}catch(e){dbug.log(e)}try{var rr_po_media=$E('.rr_po_media');if(rr_po_media){new JlScroller({tag:'jlscroll_mediaBottom',fireOnce:true,event:'scrollTo',scrollTo:{bottom:rr_po_media}})}}catch(e){dbug.log(e)}try{var rr_po_midl=$E('.rr_po_mid1');if(rr_po_midl){new JlScroller({tag:'jlscroll_review_top',fireOnce:true,event:'scrollTo',scrollTo:{top:rr_po_midl}})}}catch(e){dbug.log(e)}try{var rr_full_r=$E('.rr_full_r');if(rr_full_r){new jlScroller({tag:'jlscroll_mostPopBottom',fireOnce:true,event:'scrollTo',scrollTo:{bottom:rr_full_r}})}}catch(e){dbug.log(e)}try{var rb_pft=$E('.rb_pft');if(rb_pft){new jlScroller({tag:'jlscroll_pageFooter',fireOnce:true,event:'scrollTo',scrollTo:{bottom:rb_pft}})}}catch(e){dbug.log(e)}try{var rr_mid_main=$E('.rr_mid_main');if(rr_mid_main){new jlScroller({tag:'jlscroll_whereBuy',fireOnce:true,event:'scrollTo',scrollTo:{bottom:rr_mid_main}})}}catch(e){dbug.log(e)}}})}function setUpNavHtml(){$$("div.xNavGrp","div.xNav").each(function(el,idx){if(!el.hasClass('CNETNavArranged')){el.getElements("ul").each(function(ul){var liObjs=ul.getElements("li");liObjs[liObjs.length-1].addClass("last")});el.getElements("H3").each(function(h3){h3.adopt(new Element("div").addClass("btn"));h3.addEvent('onfocus',function(){this.blur()})});el.getElement("ul").id="xNav-"+idx;var allLiObjs=el.getElements("LI");allLiObjs[allLiObjs.length-1].addClass("last");allLiObjs=null}el.addClass('CNETNavArranged')})};var defaultNavAccordion=null;window.addEvent('domready',function(){setUpNavHtml();if(defaultNavAccordion==null)defaultNavAccordion=new CNETNavAccordion();tabMouseOvers('hover','','div.xNavGrp div.btn')});var userProducts=new Array();var shopListProducts=new Array();var validSiteIds=[1,7,9,15,16];var isOnList=false;var element;var ursRegId;var profileUrl;var avgRating=-1;var userRating=-1;var numRatings=-1;var messageId;var no204=false;var nodeId;var addUrl;var listTypeId;var infoUrl="/4520-33_7-6370591.html";var urs_reg_id;var howManyCoCoProds=-1;var mpList=new Array();var listItemToProductMap=new Object();function setButtons(u,li,pList){for(var i=0;i<pList.length;i++){isProductOnList(u,li,pList[i])}};function isProductOnList(u,li,p){loadMpForNm(p)};function fetchUoData(u,p,n){var siteId=getSiteIdFromOid();var search=location.search;var re=/noAjax/;if(!re.test(search)){var ursRegID=u;nodeId=n;if(ursRegID&&p){loadUoDataXML("http://"+correctHostForSite(siteId)+"/5261-4"+tokenizeSiteId(siteId)+"0-18.html?assetID="+p+"&ursRegID="+ursRegID);showUoData(p)}else{showUoData(p)}}};function loadUoDataXML(url){if(window.XMLHttpRequest){uoReq=new XMLHttpRequest();uoReq.open("GET",url,false);uoReq.send(null)}else if(window.ActiveXObject){isIE=true;uoReq=new ActiveXObject("Microsoft.XMLHTTP");if(uoReq){uoReq.open("GET",url,false);uoReq.send()}}if(uoReq.status==200){var xml=uoReq.responseXML;if(xml){parseUoData(xml)}}};function parseUoData(xml){avgRating=xml.getElementsByTagName("avgRating")[0].childNodes[0].nodeValue;numRatings=xml.getElementsByTagName("numRatings")[0].childNodes[0].nodeValue;userRating=xml.getElementsByTagName("userRating")[0].childNodes[0].nodeValue;messageId=xml.getElementsByTagName("messageID")[0].childNodes[0].nodeValue};function showUoData(productId){var host=location.host;var re=/^www/;if(re.test(host)){host=host.replace(re,'reviews')}if(avgRating!=-1&&numRatings>4){var avgRatingFloor=Math.floor(avgRating);document.getElementById(productId+"_avgImg").setAttribute("src","/i/rev/rate_"+avgRatingFloor+".gif");document.getElementById(productId+"_avgImg").setAttribute("alt",avgRating);document.getElementById(productId+"_avgRating").innerHTML=avgRating;document.getElementById(productId+"_avgReview").innerHTML="Average users' rating:";document.getElementById(productId+"_avgReview").setAttribute("href","http://"+host+"/4852-"+nodeId+"_7-"+productId+".html?tag=qlph")}else{if(document.getElementById(productId+"_uoAvg")){document.getElementById(productId+"_uoAvg").style.display="none"}}if(userRating!=-1){if(document.getElementById(productId+"_noRating")){document.getElementById(productId+"_noRating").style.display="none"}var userRatingFloor=Math.floor(userRating);document.getElementById(productId+"_userImg").setAttribute("src","/i/rev/rate_"+userRatingFloor+".gif");document.getElementById(productId+"_userImg").setAttribute("alt",userRating);document.getElementById(productId+"_userRating").innerHTML=userRating;document.getElementById(productId+"_userReview").innerHTML="My rating:";document.getElementById(productId+"_userReview").setAttribute("href","http://"+host+"/4864-"+nodeId+"_7-"+productId+".html?messageSiteID=7&messageID="+messageId+"&tag=mpuo")}else{if(document.getElementById(productId+"_uoUser")){document.getElementById(productId+"_uoUser").style.display="none"}if(document.getElementById(productId+"_noRating")){document.getElementById(productId+"_share").setAttribute("href","http://"+host+"/"+eval("pp_"+productId)+"/5260-3000_7-0.html?nodeID="+nodeId+"&assetID="+productId+"&tag=mpuo")}}};function MlpProduct(p,n){this.productId=p;this.nodeId=n};function fetchMiniMlp(p,n){var search=location.search;var re=/noAjax/;if(!re.test(search)){var product=new MlpProduct(p,n);product.loadMlpData()}};MlpProduct.prototype.loadMlpData=function(){var siteId=getSiteIdFromOid();var url="http://"+correctHostForSite(siteId)+"/4591-4"+tokenizeSiteId(siteId)+this.productId+".html?nodeId="+this.nodeId+"&_siteid_=1";var productId=this.productId;var noPricingData="<div class=\"myp_clock\"><div align=\"center\">"+"<p style=\"float:none;\">Unable to retrieve pricing data<p>"+"</div></div><br clear=\"all\" /></div></div><div class=\"hrw hrprices\"><hr /></div>";var mlpReq;if(window.XMLHttpRequest){mlpReq=new XMLHttpRequest();mlpReq.onreadystatechange=function(){if(mlpReq.readyState==4){if(mlpReq.status==200){var re=/Page Not Found/;if(!re.test(mlpReq.responseText)){document.getElementById(productId+"_mlp").innerHTML=mlpReq.responseText}else{document.getElementById(productId+"_mlp").innerHTML=noPricingData}}}};mlpReq.open("GET",url,true);mlpReq.send(null)}else if(window.ActiveXObject){mlpReq=new ActiveXObject("Microsoft.XMLHTTP");if(mlpReq){mlpReq.onreadystatechange=function(){if(mlpReq.readyState==4){if(mlpReq.status==200){var re=/Page Not Found/;if(!re.test(mlpReq.responseText)){document.getElementById(productId+"_mlp").innerHTML=mlpReq.responseText}else{document.getElementById(productId+"_mlp").innerHTML=noPricingData}}}};mlpReq.open("GET",url,true);mlpReq.send()}}};function openPopWindow(url,name,width,height){self.name="productPageWin";popUpWin=window.open(url,name,'toolbar=0,location=no,directories=0,status=0,top=0,scrollbars=yes,resizable=1,width='+width+',height='+height);if(navigator.appName=='Netscape'){popUpWin.focus()}};function correctHostForSite(siteId){var host=location.host;if(siteId==1){var re1=/^reviews/;var re2=/^shopper/;if(re1.test(host)){host=host.replace(re1,'www')}else if(re2.test(host)){host=host.replace(re2,'www')}}else if(siteId==7){var re1=/^www/;var re2=/^shopper/;if(re1.test(host)){host=host.replace(re1,'reviews')}else if(re2.test(host)){host=host.replace(re2,'reviews')}}else if(siteId==9){var re1=/^www/;var re2=/^reviews/;if(re1.test(host)){host=host.replace(re1,'shopper')}else if(re2.test(host)){host=host.replace(re2,'shopper')}}return host};function getSiteIdFromOid(){var path=location.pathname;var underScoreIndex=path.lastIndexOf("_");var pathChunk=path.substring(underScoreIndex,path.length);var dashIndex=pathChunk.indexOf("-");var siteId=parseInt(pathChunk.substring(1,dashIndex));if(siteId=="NaN"){return"invalid"}else{for(var i=0;i<validSiteIds.length;i++){if(siteId==validSiteIds[i]){return siteId}}return"invalid"}};function tokenizeSiteId(siteId){if(siteId!="invalid"){siteId="_"+siteId+"-"}else{siteId="-"}return siteId};function emailMyProductsListSubmit(){if(document.emailMemberForm.toAddress.value==''){alert("Please enter at least one recipient!");return false}if(document.emailMemberForm.toAddress.value.length>0){var toAddress=document.emailMemberForm.toAddress.value;if(toAddress.indexOf(",")>-1){var addressList=toAddress.split(",");var isValid=true;for(var i=0;i<addressList.length;i++){trimmedAddress=addressList[i].replace(/^\s*|\s*$/g,"");if(trimmedAddress.indexOf("@")==-1||(trimmedAddress.lastIndexOf(".")<trimmedAddress.indexOf("@"))||trimmedAddress.indexOf(' ')>-1){alert(trimmedAddress+" is not a valid email address!");isValid=false}}if(!isValid){return false}}else{if(toAddress.indexOf("@")==-1||(toAddress.lastIndexOf(".")<toAddress.indexOf("@"))||toAddress.indexOf(' ')>-1){alert(toAddress+" is not a valid email address!");return false}}}if(document.emailMemberForm.messageBody.value==''){alert("Please enter a message!");return false}document.emailMemberForm.submit();return true};function myProductsBodyMaximumLength(element,maxvalue){var q=eval("document.emailMemberForm."+element+".value.length");var r=q-maxvalue;var msg="You have entered "+q+" characters which exceeds the Field limit. "+"Please abbreviate "+"your text to "+maxvalue+" characters or it'll be truncated.";if(q>maxvalue)alert(msg)};function myProductsBodyCheckLength(obj,n){var theValue=obj.value;var theLength=obj.value.length;window.status=theLength+' of '+n+' maximum characters';if(theLength>n){obj.value=theValue.substring(0,n);window.status=n+' of '+n+' maximum characters'}};function includeVirtual(url,whereToPutItID){if(url.length>0&&whereToPutItID&&whereToPutItID.length>0){var whereToPutIt=document.getElementById(whereToPutItID);if(whereToPutIt){var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var response=xmlhttp.responseText;if(response&&response.length>0){whereToPutIt.innerHTML=response}}}};xmlhttp.open("GET",url,true);xmlhttp.send(null)}}};function newXMLHttpRequest(){var xmlhttp=false;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else if(window.ActiveXObject){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e1){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e2){}}}return xmlhttp};var localStoresTabOriginalState=new Array();var currentUsersZipCode="";function checkLocalAvailabilityMP(productId,sku,mfg){if(currentUsersZipCode&&currentUsersZipCode.length>0){var numZeros=5-currentUsersZipCode.length;if(numZeros>0){for(var i=0;i<numZeros;i++){currentUsersZipCode="0"+currentUsersZipCode}}document.getElementById("zipCode_"+productId).innerHTML=currentUsersZipCode;document.getElementById("zipCode2_"+productId).innerHTML=currentUsersZipCode;document.getElementById("zipCode3_"+productId).innerHTML=currentUsersZipCode;var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}var url="/4589-1-0.html?sku="+sku+"&zip="+currentUsersZipCode+"&mfg="+mfg;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var merchants=eval('('+xmlhttp.responseText+')');if(merchants.count>0){var key='lct_local_with_prices_off_';document.getElementById(key+productId).style.display="block";localStoresTabOriginalState[productId]=key}else{var key='lct_noprices_';document.getElementById('lct_noprices_'+productId).style.display="block";localStoresTabOriginalState[productId]=key}}}};xmlhttp.open("GET",url,true);xmlhttp.send(null)}else{var key='lct_nozip_';document.getElementById('lct_nozip_'+productId).style.display="block";localStoresTabOriginalState[productId]=key}};var mlpAreas=new Array();function showLocalShoppingArea(productId){if(document.getElementById("lct_local_change_zip_on_"+productId).style.display=="none"){var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}var url="/4140-4-"+productId+".html";xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var response=xmlhttp.responseText;if(response&&response.length>0){var areaForThisProduct=document.getElementById(productId+"_mlp");if(!mlpAreas[productId]||mlpAreas[productId].length<1){mlpAreas[productId]=areaForThisProduct.innerHTML}areaForThisProduct.innerHTML=response;document.getElementById(localStoresTabOriginalState[productId]+productId).style.display="none";document.getElementById('lct_local_with_prices_on_'+productId).style.display="block";document.getElementById('lct_online_off_'+productId).style.display="block";document.getElementById('lct_online_on_'+productId).style.display="none"}}}};xmlhttp.open("GET",url,true);xmlhttp.send(null)}};function processZipChange(productId,newZip){var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}var url="/4139-4-0.html?ccmd=add&zip="+newZip;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var response=xmlhttp.responseText;if(response&&response.length>0&&parseInt(response)>0){location.reload()}else{document.getElementById('tct_chgzip_text_'+productId).innerHTML='<!--'+response+'-->You entered "'+newZip+'" which is not a valid zip code. Please enter a five digit zip code below.'}}}};xmlhttp.open("GET",url,true);xmlhttp.send(null)};function showChangeZipCodeForm(productId,dontSwitchTabs){document.getElementById(productId+"_mlp").style.display="none";document.getElementById("lcl_chgzip_form_"+productId).style.display="block";document.getElementById("lct_local_change_zip_on_"+productId).style.display="block";document.getElementById(localStoresTabOriginalState[productId]+productId).style.display="none";document.getElementById('lct_online_off_'+productId).style.display="block";document.getElementById('lct_online_on_'+productId).style.display="none";document.getElementById('lct_local_with_prices_on_'+productId).style.display="none"};function showMlpArea(productId){var areaForThisProduct=document.getElementById(productId+"_mlp");areaForThisProduct.style.display="block";if(mlpAreas[productId]&&mlpAreas[productId].length>0){areaForThisProduct.innerHTML=mlpAreas[productId]}document.getElementById("lcl_chgzip_form_"+productId).style.display="none";document.getElementById("lct_local_change_zip_on_"+productId).style.display="none";document.getElementById("lct_online_off_"+productId).style.display="none";document.getElementById("lct_online_on_"+productId).style.display="block";document.getElementById("lct_local_with_prices_on_"+productId).style.display="none";document.getElementById(localStoresTabOriginalState[productId]+productId).style.display="block"};var GOT_IT_TYPE=1;var WANT_IT_TYPE=2;var MPWRAP_PREFIX="mpwrap_";function findMpWrapper(element,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;var re=new RegExp('^'+wrap_prefix+'[0-9]+$','i');var par=element;while(par&&!(par.id&&par.id.match(re))){par=par.parentNode;if(par.className=='mp_wrap'){return par}else{if(par.parentNode.id=='dfll'){return par}}}if(!par){par=element;var re2=new RegExp('^[0-9]+$','i');while(par&&!(par.id&&par.id.match(re2))){par=par.parentNode;if(par.className=='mp_wrap'){return par}else{if(par.parentNode.id=='dfll'){return par}}}}return par};function notOnListClick(obj,idName,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;obj.style.display="none";if(!idName||idName.length<=0)idName="mp3_add_exp";var theOne;var par=findMpWrapper(obj,wrap_prefix);if(par){theOne=findChildElementById(par,idName)}if(theOne){theOne.style.display="block";var disNum=(location.href.match(/\/4540-/))?howManyCoCoProds+1:howManyCoCoProds;if(howManyCoCoProds>-1&&disNum<6){theOne.className="mp3_add_exp_marg"+disNum+" v1"}}};function notOnListClick2(obj,idName,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;obj.style.display="none";if(!idName||idName.length<=0)idName="mp3_add_exp";var theOne;var par=findMpWrapper(obj,wrap_prefix);if(par){theOne=findChildElementById(par,idName)}if(theOne){theOne.style.display="block"}};function doMpClose(element,wrap_prefix){var wrap=findMpWrapper(element,wrap_prefix);for(var i=0;i<wrap.childNodes.length;i++){if(wrap.childNodes[i]&&wrap.childNodes[i].innerHTML){wrap.childNodes[i].style.display="none"}}findChildElementById(wrap,"notonlist").style.display="block"};function findElementByAttributeNVP(element,attName,attValue){if(element&&element.hasChildNodes){for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];if(child&&child.innerHTML&&child.getAttribute(attName)&&child.getAttribute(attName)==attValue){return child}else{var newChild=findElementByAttributeNVP(child,attName,attValue);if(newChild){return newChild}}}}};function findChildElementById(element,id){if(element.id==id)return element;if(element&&element.hasChildNodes){for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];if(child&&child.id==id){return child}else{var newChild=findChildElementById(child,id);if(newChild){return newChild}}}}};function markAsOnList(productId,type,wrap_prefix){if(type==4){type=1}else if(type==5){type=2}var mpArea=document.getElementById(wrap_prefix+productId);if(!mpArea){mpArea=document.getElementById(productId)}if(mpArea){var onBtnName;switch(type){case GOT_IT_TYPE:onBtnName="onlist_gotit";break;case WANT_IT_TYPE:onBtnName="onlist_wantit";break;default:return false}var notOnListArea=findChildElementById(mpArea,"notonlist");if(notOnListArea)notOnListArea.style.display="none";var onBtnArea=findChildElementById(mpArea,onBtnName);if(onBtnArea)onBtnArea.style.display="block"}};function setMpLink(element,type,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;var wrap=findMpWrapper(element,wrap_prefix);if(wrap.id.indexOf('mpwrap')>-1){productId=wrap.id.substring(wrap_prefix.length)}else{productId=wrap.id}var url='/5302-4_92-0-1.html?gtProductId='+productId+'&tag=mpnav&listTypeId='+type+'#gt_'+productId;element.href=url};function addProductToList(element,type,idName,wrap_prefix){var userListType;if(type==1){userListType=4}else if(type==2){userListType=5}wrap_prefix=wrap_prefix||MPWRAP_PREFIX;needLogin=!(urs_reg_id&&urs_reg_id.length>5&&logged_in&&remember_me&&(parseInt(logged_in)+parseInt(remember_me)>0));var thisOne;var par=findMpWrapper(element,wrap_prefix);if(par){idName=idName||"mp3_add_exp";var notOnListArea=findChildElementById(par,"notonlist");if(notOnListArea)notOnListArea.style.display="none";thisOne=findChildElementById(par,idName);if(thisOne)thisOne.style.display="none";var waiting=findChildElementById(par,"waiting");if(waiting)waiting.style.display="block";var productId;if(par.id.indexOf('mpwrap')>-1){productId=par.id.substring(wrap_prefix.length)}else{productId=par.id}var addUrl='/9800-1-0.xml?referencedType=2&referencedId='+productId+'&listItemType='+userListType+'&cmd=createListItem';if(needLogin){addUrl+="&viewName=redirect:";if(document.returnUrl){addUrl+=returnUrl}else{addUrl+=escape(location.href)}window.location=addUrl;return}else{var xmlhttp=newXMLHttpRequest();if(xmlhttp){xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState>=4){if(waiting)waiting.style.display="none";var attName=(type==WANT_IT_TYPE)?"onlist_wantit":"onlist_gotit";var theOne=findChildElementById(par,attName);if(theOne){theOne.style.display="block"}}};xmlhttp.open("GET",addUrl,true);xmlhttp.send(null)}}}};function loadProductListJSON(url){if(!mpList.list){if(window.XMLHttpRequest){pListReq=new XMLHttpRequest();pListReq.open("GET",url,false);pListReq.send(null)}else if(window.ActiveXObject){isIE=true;pListReq=new ActiveXObject("Microsoft.XMLHTTP");if(pListReq){pListReq.open("GET",url,false);pListReq.send()}}if(pListReq.status==200){var res=pListReq.responseText;mpList=eval('('+res+')')}}};function loadMpForCoco(prods,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;howManyCoCoProds=prods.length;for(var i=0;i<prods.length;i++){document.getElementById(wrap_prefix+prods[i]).align="center"}if(urs_reg_id&&urs_reg_id.length>5&&("1"==logged_in||"1"==remember_me)){var daUrl="/9801-1-0.html?cmd=getChildFolders&viewName=.json-my-products-list";loadProductListJSON(daUrl);for(var i=0;i<prods.length;i++){for(var j=0;j<mpList.list.length;j++){if(prods[i]==mpList.list[j].referencedId){markAsOnList(prods[i],mpList.list[j].listItemType.value,wrap_prefix);break}}}}};function loadMpForNm(prodId){if(urs_reg_id&&urs_reg_id.length>5&&("1"==logged_in||"1"==remember_me)){var daUrl="/9801-1-0.html?cmd=getChildFolders&viewName=.json-my-products-list";loadProductListJSON(daUrl);for(var i=0;i<mpList.list.length;i++){if(prodId==mpList.list[i].referencedId){markAsOnList(prodId,mpList.list[i].listItemType.value,MPWRAP_PREFIX);break}}}};function loadMpForMp(prods,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;if(urs_reg_id&&urs_reg_id.length>5&&("1"==logged_in||"1"==remember_me)){var daUrl="/9801-1-0.html?cmd=getChildFolders&viewName=.json-my-products-list";loadProductListJSON(daUrl);for(var i=0;i<prods.length;i++){for(var j=0;j<mpList.list.length;j++){if(prods[i]==mpList.list[j].referencedId){markAsOnList(prods[i],mpList.list[j].listItemType.value,wrap_prefix);break}}}}};function loadMpForOff(prods,wrap_prefix){wrap_prefix=wrap_prefix||MPWRAP_PREFIX;howManyCoCoProds=prods.length;if(urs_reg_id&&urs_reg_id.length>5&&("1"==logged_in||"1"==remember_me)){var daUrl="/5301-4-0-3.html?action=findUserProductsJSON";loadProductListJSON(daUrl);for(var i=0;i<prods.length;i++){if(mpList[prods[i]]){markAsOnList(prods[i],mpList[prods[i]],wrap_prefix)}}}for(var i=0;i<prods.length;i++){document.getElementById(wrap_prefix+prods[i]).style.display="block"}};function reloadPage(){location.reload(true)}function changeMpView2(selector,fieldName){var currentUrl=location.href;var newView=selector.options[selector.selectedIndex].value;if(currentUrl){if(currentUrl.indexOf('?')>-1){var whereItIs=currentUrl.indexOf(fieldName);if(whereItIs>-1){var sub=currentUrl.substring(whereItIs);var otSpot=sub.indexOf('&');var finalUrl=currentUrl.substring(0,whereItIs)+fieldName+"="+newView;if(otSpot>-1){finalUrl+=sub.substring(otSpot)}location.href=finalUrl}else{location.href=currentUrl+'&'+fieldName+'='+newView}}else{location.href=currentUrl+'?'+fieldName+'='+newView}}};function mpMoveMultipleProducts2(form,fromListTypeId){var formQs=form.toQueryString();var toListTypeId=4;if(fromListTypeId==4){toListTypeId=5}if(formQs&&formQs.length>0){var moveUrl='/9800-1_92-0.xml?component=&cmd=moveListItems&toFolderType='+toListTypeId+'&'+formQs+'&viewName=.empty';var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}xmlhttp.open("GET",moveUrl,false);xmlhttp.send(null);if(xmlhttp.status==200){if(!returnUrl){returnUrl=window.returnUrl}returnUrl=unescape(returnUrl);window.location=returnUrl}}};function mpRemoveMultipleProducts2(form){var formQs=form.toQueryString();if(formQs&&formQs.length>0){var removeUrl='/9800-1_92-0.xml?component=&cmd=deleteListItems&'+formQs+'&viewName=.empty';var xmlhttp=newXMLHttpRequest();if(!xmlhttp){return false}xmlhttp.open("GET",removeUrl,false);xmlhttp.send(null);if(xmlhttp.status==200){if(!returnUrl){returnUrl=window.returnUrl}returnUrl=unescape(returnUrl);window.location=returnUrl}}};function mpCompareMultipleProducts(form){var formQs=form.toQueryString();if(formQs&&formQs.length>0){var re=new RegExp('listItemIds=[0-9]+');while(formQs.match(re)){var match=formQs.match(re)[0];var startIndex=match.indexOf('=')+1;if(startIndex>-1){var listItemId=match.substring(startIndex);var productId=listItemToProductMap[listItemId];match=match.replace(listItemId,productId)}match=match.replace("listItemIds","id");formQs=formQs.replace(re,match);var re2=new RegExp('&q=');formQs=formQs.replace(re2,'')}var cocoUrl='/4504-5_7-0.html?tag=pageNav&'+formQs;location.href=cocoUrl}else{alert("Please select several Products to continue.")}};function refreshMySubmissions(url){mySubmissionsReq=false;if(window.XMLHttpRequest){try{mySubmissionsReq=new XMLHttpRequest()}catch(e){mySubmissionsReq=false}}else if(window.ActiveXObject){try{mySubmissionsReq=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{mySubmissionsReq=new ActiveXObject("Microsoft.XMLHTP")}catch(e){mySubmissionsReq=false}}}if(mySubmissionsReq){mySubmissionsReq.onreadystatechange=processMySubmissionsReqChange;mySubmissionsReq.open("GET",url,true);mySubmissionsReq.send("")}};function processMySubmissionsReqChange(){if(mySubmissionsReq.readyState>=4){if(mySubmissionsReq.status==200){document.getElementById('mysubmissions_wrapper').innerHTML=mySubmissionsReq.responseText}}};function addToProductMap(listItemId,productId){listItemToProductMap[listItemId]=productId};var totalProducts=0;var gotItProducts=0;var wantItProducts=0;function buildMyProductsAggregateCounts(regId){var url="/9801-1-0.html?cmd=getChildFolders&ownerId="+regId+"&viewName=.json-my-products-list";loadProductListJSON(url);if(mpList.list.length>0){totalProducts=mpList.list.length;for(var i=0;i<mpList.list.length;i++){if(mpList.list[i].listItemType.value==4){gotItProducts++}else if(mpList.list[i].listItemType.value==5){wantItProducts++}}$('totalProdCount').innerHTML=totalProducts;$('gotItProdCount').innerHTML=gotItProducts;$('wantItProdCount').innerHTML=wantItProducts}};var logged_in=UserVars.loggedIn;var user_name=UserVars.userName;var urs_reg_id=UserVars.ursRegId;var remember_me=UserVars.rememberMe;var cnet_site_id=PageVars.siteId;var cnet_ont_id=PageVars.nodeId;var cnet_page_type=PageVars.pageType;var cnet_asset_id=PageVars.assetId;var cnet_edition_id=PageVars.editionId;function bookMark(url,pageName){url=$pick(url,window.location.href);pageName=$pick(pageName,document.title);if(window.external)window.external.AddFavorite(url,pageName);if((agt.indexOf('mozilla')!=-1)&&(agt.indexOf("msie")==-1)&&(agt.indexOf("opera")==-1)){alert('Bookmark this page by pressing OK, and then Ctrl+D')}};function emailFriend(){location.href="mailto:?subject="+document.title+"&body=Check it out at "+location.href};var hotTopicSwapper={options:{'defaults':["reviews","sreviews","features","blogs","news","downloads","shopping","buy","notebooks","desktops","cards","tips","user-opinions","forums","learn","feedback"],'www.news.com':["news","reviews","sreviews","features","blogs","downloads","shopping","buy","notebooks","desktops","cards","tips","user-opinions","forums","learn","feedback"],'news.com.com':["news","reviews","sreviews","features","blogs","downloads","shopping","buy","notebooks","desktops","cards","tips","user-opinions","forums","learn","feedback"],'reviews.cnet.com':["reviews","sreviews","features","blogs","news","downloads","shopping","buy","notebooks","desktops","cards","tips","user-opinions","forums","learn","feedback"],'shopper.cnet.com':["shopping","buy","notebooks","desktops","cards","downloads","reviews","sreviews","features","blogs","news","tips","user-opinions","forums","learn","feedback"],'www.download.com':["downloads","reviews","sreviews","features","blogs","news","shopping","buy","notebooks","desktops","cards","tips","user-opinions","forums","learn","feedback"]},swapElements:function(domain){dbug.log('rearranging hot topics for %s',domain);try{var theOrder=$pick(this.options[domain],this.options.defaults);dbug.log('ordering as %o',theOrder);if(!theOrder||theOrder.length==0)return;var sections=theOrder.map(function(section){return $(section)}).filter(function(section){return section});var children=sections[0].getParent().getElements('div.sh-feat-grp');children.each(function(child){if(!sections.test(child))sections.push(child)});dbug.log('sections orderd as %o',sections);var prev=sections[0].getParent().getFirst();sections.each(function(section){dbug.log('injecting %s (%o) after %o',section,$(section),prev);prev=section.injectAfter(prev)})}catch(e){dbug.log(e.message)}return}};if(PageVars.pageType==4520)window.addEvent('domready',hotTopicSwapper.swapElements.pass(window.getHost(document.referrer),hotTopicSwapper));var mboxCopyright="Copyright 2003-2006 Offermatica Corporation. All Rights Reserved.";mboxCreate=function(a){if(!mboxEnv.isSupported()){return}var b=new Array();b[0]='mbox='+a;for(var c=1;c<arguments.length;c++){b[c]=arguments[c]}b[b.length]="mboxCount="+ ++mboxCount;var d=new mbox(a,b);d.put();return d};mbox=function mbox(e,b){this.f=mboxBuildURL(b);this.g=null;this.h=0;this.i=null;this.j=new mboxOfferContent();this.k=this.show;this.error=null;this.l=new Object();this.m=0;if(mboxs[e]){var n="multiple mboxes called: '"+e+'"';this.setError(n);mboxs[e].setError(n);e=e+"-dup-"+Math.floor(Math.random()*999999)}this.e=e;mboxs[e]=this};mbox.prototype.getName=function(){return this.e};mbox.prototype.parameters=function(){return mboxGetParamsFromQueryString(this.f)};mbox.prototype.setError=function(n){this.error=n;this.o=this.putNothing;this.k=this.hide};mbox.prototype.put=function(){if(mboxEnv.isEnabled()){this.setEventTime("put.start");document.write('<div id="'+this.getMarkerName()+'" style="visibility:hidden;display:none">'+'<'+'scr'+'ipt language="JavaScript">'+'mboxs["'+this.e+'"].startTimeout(15000);'+'<'+'\/scr'+'ipt>'+'<'+'scr'+'ipt src="'+this.f+'" language="JavaScript"><'+'\/scr'+'ipt>'+'</div>');this.setEventTime("put.end")}else{document.write('<div id="'+this.getMarkerName()+'"></div>')}};mbox.prototype.putNothing=function(){document.write('<div id="'+this.getMarkerName()+'"></div>')};mbox.prototype.activate=function(){if(this.h){return this.h}this.setEventTime('activate'+ ++this.m+'.start');if(this.k()){this.cancelTimeout();this.h=1}this.setEventTime('activate'+this.m+'.end');return this.h};mbox.prototype.isActivated=function(){return this.h};mbox.prototype.setActivateAction=function(p){this.k=p};mbox.prototype.setOffer=function(j){this.j=j};mbox.prototype.getOffer=function(){return this.j};mbox.prototype.show=function(){this.setEventTime('show.start');var q=this.j.show(this);this.setEventTime(q==1?"show.end.ok":"show.end");return q};mbox.prototype.showContent=function(r){if(r==null){return 0}var s=this.getDefaultDiv();if(s!=null&&s.parentNode.replaceChild){s.parentNode.replaceChild(r,s)}else{var t=document.getElementById(this.getMarkerName());if(t==null){return 0}if(s!=null){mboxMakeDivInvisible(s)}mboxMakeDivVisible(t)}mboxMakeDivVisible(r);return 1};mbox.prototype.hide=function(){this.setEventTime('hide.start');var t=document.getElementById(this.getMarkerName());if(t!=null){t.style.visibility="hidden";t.style.display="none"}var s=this.getDefaultDiv();if(s!=null){s.style.visibility="visible";s.style.display="block";this.setEventTime('hide.end.ok');return 1}this.setEventTime('hide.end.fail');return 0};mbox.prototype.finalize=function(){this.setEventTime('finalize.start');this.cancelTimeout();if(!this.activate()){this.hide();this.setEventTime('finalize.end.hide')}this.setEventTime('finalize.end.ok')};mbox.prototype.startTimeout=function(u){this.g=setTimeout('mboxCheckTimeoutById("'+this.e+'")',u)};mbox.prototype.cancelTimeout=function(){if(this.g!=null){clearTimeout(this.g)}};mbox.prototype.getImportDiv=function(){return document.getElementById(this.getImportName())};mbox.prototype.getDefaultDiv=function(){if(this.i!=null){return this.i}var v=document.getElementById(this.getMarkerName());while(v!=null){if((v.nodeType==1)&&(v.nodeName=="DIV")){if(v.className.indexOf('mboxMarker-')>0){return null}else if(v.className=='mboxDefault'){this.i=v;return v}}v=v.previousSibling}return null};mbox.prototype.setActivateAction=function(action){this.k=action};mbox.prototype.getMarkerName=function(){return'mboxMarker-'+this.e};mbox.prototype.getImportName=function(){return'mboxImported-'+this.e};mbox.prototype.setEventTime=function(w){this.l[w]=(new Date()).getTime()};mbox.prototype.getEventTimes=function(){return this.l};mbox.prototype.getURL=function(){return this.f};mboxMakeDivVisible=function(x){x.style.visibility="visible";x.style.display="block"};mboxMakeDivInvisible=function(x){x.style.visibility="hidden";x.style.display="none"};mboxGetParamsFromQueryString=function(url){var y=new Object();var z=url.indexOf("?");if(z==-1||z==(url.length-1)){return y}var A=url.substring(z+1);var B=A.split("&");for(var c=0;c<B.length;c++){var C=B[c].split("=");if(C.length<2||C[0]==""||C[1]==""){continue}else{y[C[0]]=C[1]}}return y};mboxOfferContent=function(){};mboxOfferContent.prototype.show=function(D){var r=D.getImportDiv();return D.showContent(r)};mboxOfferDefault=function(){};mboxOfferDefault.prototype.show=function(D){return D.hide()};mboxParametersClient=function(){return""};mboxBuildURL=function(b){var q=mboxServerURL;q+="?"+b[0];for(var c=1;c<b.length;c++){q+="&"+b[c]}if(document.location.protocol=="https:"){q=q.replace("http:","https:")}q+="&mboxHost="+document.location.hostname;if(q.indexOf('mboxSession')==-1){q+="&mboxSession="+mboxSessionId.getId()}q+="&mboxPC="+mboxPCId.getId();q+="&mboxPage="+mboxPageId;q+="&mboxXDomain=enabled";q+="&mboxURL="+escape(document.location);var E=escape(document.referrer);if(q.length+E.length<2000){q+="&mboxReferrer="+E}return q+"&mboxVersion="+mboxVersion};mboxIsSupported=function(){return true};mboxEnvironment=function(F){this.G=mboxIsSupported()&&document.getElementById&&(window.attachEvent||document.addEventListener||window.addEventListener);this.H=this.G;if(mboxGetPageParameter(F)!=null){this.H=false}if(!mboxCookies.isEnabled()){this.H=false}if(mboxCookies.getCookie('disable')=="true"){this.H=false}if(this.isAdmin()){this.enable()}};mboxEnvironment.prototype.isEnabled=function(){return this.H};mboxEnvironment.prototype.isSupported=function(){return this.G};mboxEnvironment.prototype.disable=function(u){if(typeof duration=='undefined'){u=60*60}if(!this.isAdmin()){this.H=false;mboxCookies.setCookie('disable',"true",u)}};mboxEnvironment.prototype.enable=function(){this.H=true;mboxCookies.deleteCookie('disable')};mboxEnvironment.prototype.isAdmin=function(){return document.location.href.indexOf('mboxEnv')!=-1};mboxEnvironment.prototype.limitTraffic=function(I,u){if(I==100){return}var J=false;if(mboxCookies.getCookie('traffic')=='true'){J=true}if(this.isAdmin()){J=true;mboxCookies.setCookie('level',I,u);mboxCookies.setCookie('traffic',J,u)}else if(parseInt(mboxCookies.getCookie('level'))!=I){J=(Math.random()*100)<=I;mboxCookies.setCookie('level',I,u);mboxCookies.setCookie('traffic',J,u)}if(J){this.enable()}else{this.disable()}};mboxCookieManager=function mboxCookieManager(K,L){this.K=K;if(L.indexOf(".")==-1){L=""}this.L=L==""?"":";domain="+L;this.loadCookies()};mboxCookieManager.prototype.isEnabled=function(){this.setCookie('check',"true",60);this.loadCookies();return this.getCookie('check')=="true"};mboxCookieManager.prototype.setCookie=function(K,M,u){if(typeof K!='undefined'&&typeof M!='undefined'&&typeof u!='undefined'){this.N[K]={name:K,value:escape(M),expireOn:Math.ceil(u+new Date().getTime()/1000)};this.saveCookies()}};mboxCookieManager.prototype.getCookie=function(K){var O=this.N[K];if(typeof O=='undefined'||O==null){return null}return unescape(O.value)};mboxCookieManager.prototype.deleteCookie=function(K){var P=new Object();for(O in this.N){if(O!=K){P[O]=this.N[O]}}this.N=P;this.saveCookies()};mboxCookieManager.prototype.getCookieNames=function(Q){var R=new Object();for(O in this.N){if(O.indexOf(Q)==0){R[R.length]=O}}return R};mboxCookieManager.prototype.saveCookies=function(){var S=new Array();var T=0;for(O in this.N){if(this.N[O]!=null){S[S.length]=this.N[O].name+"#"+this.N[O].value+"#"+this.N[O].expireOn;if(T<this.N[O].expireOn){T=this.N[O].expireOn}}}var U=new Date(T*1000);document.cookie=this.K+"="+S.join("|")+";expires="+U.toGMTString()+";path=/"+this.L};mboxCookieManager.prototype.loadCookies=function(){this.N=new Object();var V=document.cookie.indexOf(this.K+"=");if(V!=-1){var W=document.cookie.indexOf(";",V);if(W==-1){W=document.cookie.indexOf(",",V);if(W==-1){W=document.cookie.length}}var X=document.cookie.substring(V+this.K.length+1,W).split("|");var Y=Math.ceil(new Date().getTime()/1000);for(var c=0;c<X.length;c++){var O=X[c].split("#");if(Y<=O[2]){this.N[O[0]]={name:O[0],value:O[1],expireOn:O[2]}}}}};mboxSetCookie=function(K,M,u){mboxCookies.setCookie(K,M,u)};mboxGetCookie=function(K){return mboxCookies.getCookie(K)};mboxActivateById=function(e){mboxs[e].activate()};mboxCheckTimeoutById=function(e){mboxs[e].activate();if(!mboxs[e].isActivated()){mboxEnv.disable();window.location.reload(false)}};mboxCheckAll=function(){for(var D in mboxs){mboxs[D].finalize()}};mboxSetupSignal=function(Z,a){var b=new Array();for(var c=1;c<arguments.length;c++){b[c-1]=arguments[c]}mboxCookies.setCookie("signal-"+Z,b.join("&"),45*60)};mboxSignal=function(){var _=mboxCookies.getCookieNames("signal-");for(ab in _){var bb=mboxCookies.getCookie(_[ab]);var b=bb.split("&");var a=b[0];b[0]='mbox='+a;b[b.length]="mboxCount="+ --mboxSignalCount;var cb=new mbox(a,b);cb.put();mboxCookies.deleteCookie(_[ab])}};mboxDefaultContentDisplayNone=function(){document.write("<style>."+'mboxDefault'+" {visibility:hidden;}</style>")};mboxSession=function(db,eb,fb,gb){this.eb=eb;this.fb=fb;this.gb=gb;this.hb=false;this.e=mboxGetPageParameter(this.eb);if(this.e==null||this.e.length==0){this.e=mboxCookies.getCookie('session');if(this.e==null||this.e.length==0){this.e=db;this.hb=true}}mboxCookies.setCookie('session',this.e,gb)};mboxSession.prototype.getId=function(){return this.e};mboxPC=function(db,fb,gb){this.fb=fb;this.gb=gb;this.e=mboxCookies.getCookie(this.fb);if(this.e==null||this.e.length==0){this.e=db}};mboxPC.prototype.getId=function(){mboxCookies.setCookie('PC',this.e,this.gb);return this.e};mboxPC.prototype.forceId=function(ib){if(this.e!=ib){this.e=ib;mboxCookies.setCookie(this.fb,this.e,this.gb);return true}return false};mboxGenerateId=function(){return(new Date()).getTime()+"-"+Math.floor(Math.random()*999999)};mboxGetPageParameter=function(K){var q=null;var jb=new RegExp(K+"=([^\&]*)");var kb=jb.exec(document.location);if(kb!=null&&kb.length>=2){q=kb[1]}return q};mboxCookieIsEnabled=function(){mboxCookies.setCookie('check',"true",60);return mboxCookies.getCookie('check')=="true"};mboxSafeBodyOnload=function(p){if(window.addEventListener){window.addEventListener('load',p,false)}else if(document.addEventListener){document.addEventListener('load',p,false)}else if(document.attachEvent){window.attachEvent('onload',p)}};mboxCookiePageDomain=function(){var L=(/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1];var lb=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/;if(!lb.exec(L)){var mb=(/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(L);if(mb){L=mb[0]}}return L?L:""};mboxCookieDomain=function(){return mboxCookiePageDomain()};if(typeof mboxVersion=='undefined'){var mboxVersion=22;var mboxServerURL="http://mbox4.offermatica.com/m2/cnet/mbox/standard";var mboxCookies=new mboxCookieManager("mbox",mboxCookieDomain());var mboxPageId=mboxGenerateId();var mboxSessionId=new mboxSession(mboxPageId,'mboxSession','session',31*60);var mboxPCId=new mboxPC(mboxPageId,'PC',63072000);var mboxs=new Object();var mboxCount=0;var mboxSignalCount=0;var mboxEnv=new mboxEnvironment('mboxDisable');var mboxPageStartTime=new Date().getTime();var mboxPageEndTime=mboxPageStartTime;mboxSafeBodyOnload(new Function("mboxPageEndTime = new Date().getTime()"));if(mboxEnv.isSupported()){mboxSafeBodyOnload(mboxCheckAll);mboxEnv.limitTraffic(100,10368000);if(mboxEnv.isEnabled()){mboxSignal();mboxDefaultContentDisplayNone()}}};mboxDisplayDebugInfo=function(){mboxDebugger.show()};mboxDebug=function(nb,ob,pb){this.qb=nb;this.p=null;var rb=mboxGetPageParameter(ob);if(rb==null){rb=mboxCookies.getCookie(this.qb)}if(rb!=null){if(rb.indexOf("x")==0){this.p=new mboxDebugActionNone();document.write('<'+'scr'+'ipt language="Javascript1.2" src='+'"http://admin4.offermatica.com/admin/mbox/mbox_debug_'+rb+'.jsp"'+'><'+'\/scr'+'ipt>')}else if(rb.indexOf("log")==0){this.p=new mboxDebugActionLog(rb)}else if(rb=="reset"){rb=null}else{this.p=new mboxDebugActionDefault()}}if(this.p!=null){if(pb.isSupported()){mboxSafeBodyOnload(mboxDisplayDebugInfo)}else{alert("mbox functionality is not supported on this browser");this.disable()}}if(rb!=null){mboxCookies.setCookie(this.qb,rb,45*60)}else{this.disable()}};mboxDebug.prototype.isEnabled=function(){return this.p!=null};mboxDebug.prototype.disable=function(){mboxCookies.deleteCookie(this.qb)};mboxDebug.prototype.setShowAction=function(p){this.p=p};mboxDebug.prototype.show=function(){if(this.p!=null){this.p.show()}};mboxDebugActionLog=function(rb){this.rb=rb;this.sb=(new Date()).getTime()};mboxDebugActionLog.prototype.show=function(){var tb=(new Date()).getTime();var ub=new mboxDebugWindow("Debug Log");ub.putPageStart();ub.put("<img src='http://mbox4.offermatica.com/admin/images/spacer.gif"+"?mboxDebug="+this.rb+"&mboxClient=cnet"+"&mboxPageLoadTime="+(tb-this.sb)+"&mboxCount="+mboxCount+"&mboxSignalCount="+mboxSignalCount+"'>");ub.put("<br />");ub.putCloseButton();ub.putPageEnd()};mboxDebugActionNone=function(){};mboxDebugActionNone.prototype.show=function(){alert("Debug mode not defined"+"\n('x-mode' not supported when debug is remote in mbox.js)")};mboxDebugActionDefault=function(){};mboxDebugActionDefault.prototype.show=function(){var window=new mboxDebugWindow("Debug");window.putPageStart();window.put("  <b>Mbox Debug Window (version:"+mboxVersion+")</b></br>");window.put("<p/>");window.put("<b>Page</b>: "+document.location);window.put(" <ul>");if(mboxEnv.isEnabled()){window.put("  <li>Enabled: true</li>")}else{window.put('  <li>Enabled: <span style="color:red"><b>false</b></span></li>')}window.put("  <li>Cookies enabled: "+mboxCookieIsEnabled()+"</li>");window.put("  <li>Page URL: '"+document.location+"'</li>");window.put("  <li>Cookies: '"+document.cookie+"'</li>");for(a in mboxs){window.put("  <li>mbox: '"+a+"'");window.put("   <ul>");if(mboxs[a].error!=null){window.put('   <li><span style="color: red"><b>Error: '+mboxs[a].error+'</b></span></li>')}var t=document.getElementById(mboxs[a].getMarkerName());if(t==null){window.put('    <li><span style="color: red">'+'<b>Error: can not find mbox in dom</b></span></li>')}else{window.put("    <li>has mboxDefault content div tags: "+(mboxs[a].getDefaultDiv()!=null)+"</li>")}window.put('    <li><a href="'+mboxs[a].getURL()+'">'+mboxs[a].getURL()+'</a></li>');window.put("   </ul>");window.put("  </li>")}window.put(" </ul>");window.putCloseButton();window.putPageEnd()};mboxDebugWindow=function(K){this.K=K+" "+document.location.hostname;var vb=/\W/g;var wb=this.K.replace(vb,'_');this.ub=window.open("","mboxDebugWindow"+wb,"width=600,height=300,resizable,scrollbars=yes,toolbar=yes");if(this.ub==null){alert("Unable to open Offermatica's mboxDebugWindow Window.\n"+"Are you blocking popups?\n");return}};mboxDebugWindow.prototype.put=function(yb){if(this.ub==null){return}try{this.ub.document.writeln(yb);this.ub.scrollBy(0,1000)}catch(e){alert("Unable to write to the current mboxDebug window.\n"+"Please close any open debug window");this.ub=null}};mboxDebugWindow.prototype.putCloseButton=function(){this.put("<a href=\"javascript:mboxDebugWindowClose()\">"+"click here to close debug window</a>")};mboxDebugWindow.prototype.putPageStart=function(){this.put("<html><head>"+" <title>"+this.K+"</title>"+"  <"+"scr"+"ipt>"+"   function mboxDebugWindowClose() {"+"     try {"+"       window.opener.mboxDebugger.disable();"+"     } catch(e) {"+"       alert('Could not disable debug mode.\\n'"+"         + 'Browse to a page containing an mbox and\\n'"+"         + 'click on close link.');"+"     }"+"     window.close();"+"   }"+"  <"+"\/scr"+"ipt>"+" </head>"+" <body>")};mboxDebugWindow.prototype.putPageEnd=function(){this.put("</body></html>");if(this.ub!=null){this.ub.document.close()}};if(typeof mboxDebugger=='undefined'){mboxDebugger=new mboxDebug("debug","mboxDebug",mboxEnv)};var JsonP=new Class({options:{onComplete:Class.empty,callBackKey:"callback",queryString:"",data:{},timeout:5000,retries:0},initialize:function(url,options){this.setOptions(options);this.url=this.makeUrl(url).url;this.fired=false;this.scripts=[];this.requests=0;this.triesRemaining=[]},request:function(url,requestIndex){var u=this.makeUrl(url);if(!$chk(requestIndex)){requestIndex=this.requests;this.requests++}if(!$chk(this.triesRemaining[requestIndex]))this.triesRemaining[requestIndex]=this.options.retries;var remaining=this.triesRemaining[requestIndex];dbug.log('retrieving by json script method: %s',u.url);var dl=(window.ie)?50:0;(function(){var script=new Asset.javascript(u.url,{id:'jsonp_'+u.index+'_'+requestIndex});this.fired=true;this.addEvent('onComplete',function(){try{script.remove()}catch(e){}}.bind(this));if(remaining){(function(){this.triesRemaining[requestIndex]=remaining-1;if(script.getParent()&&remaining){dbug.log('removing script (%o) and retrying: try: %s, remaining: %s',requestIndex,remaining);script.remove();this.request(url,requestIndex)}}).delay(this.options.timeout,this)}}.bind(this)).delay(dl);return this},makeUrl:function(url){var index=(JsonP.requestors.contains(this))?JsonP.requestors.indexOf(this):JsonP.requestors.push(this)-1;if(url){var separator=(url.test('\\?'))?'&':'?';var jurl=url+separator+this.options.callBackKey+"=JsonP.requestors["+index+"].handleResults";if(this.options.queryString)jurl+="&"+this.options.queryString;jurl+="&"+Object.toQueryString(this.options.data)}else var jurl=this.url;return{url:jurl,index:index}},handleResults:function(data){dbug.log('jsonp received: ',data);this.fireEvent('onComplete',[data,this])}});JsonP.requestors=[];JsonP.implement(new Options);JsonP.implement(new Events);Fx.Slide=Fx.Base.extend({options:{mode:'vertical'},initialize:function(el,options){this.element=$(el);this.wrapper=new Element('div',{'styles':$extend(this.element.getStyles('margin'),{'overflow':'hidden'})}).injectAfter(this.element).adopt(this.element);this.element.setStyle('margin',0);this.setOptions(options);this.now=[];this.parent(this.options);this.open=true;this.addEvent('onComplete',function(){this.open=(this.now[0]===0)});if(window.webkit419)this.addEvent('onComplete',function(){if(this.open)this.element.remove().inject(this.wrapper)})},setNow:function(){for(var i=0;i<2;i++)this.now[i]=this.compute(this.from[i],this.to[i])},vertical:function(){this.margin='margin-top';this.layout='height';this.offset=this.element.offsetHeight},horizontal:function(){this.margin='margin-left';this.layout='width';this.offset=this.element.offsetWidth},slideIn:function(mode){this[mode||this.options.mode]();return this.start([this.element.getStyle(this.margin).toInt(),this.wrapper.getStyle(this.layout).toInt()],[0,this.offset])},slideOut:function(mode){this[mode||this.options.mode]();return this.start([this.element.getStyle(this.margin).toInt(),this.wrapper.getStyle(this.layout).toInt()],[-this.offset,0])},hide:function(mode){this[mode||this.options.mode]();this.open=false;return this.set([-this.offset,0])},show:function(mode){this[mode||this.options.mode]();this.open=true;return this.set([0,this.offset])},toggle:function(mode){if(this.wrapper.offsetHeight==0||this.wrapper.offsetWidth==0)return this.slideIn(mode);return this.slideOut(mode)},increase:function(){this.element.setStyle(this.margin,this.now[0]+this.options.unit);this.wrapper.setStyle(this.layout,this.now[1]+this.options.unit)}});Hash.Cookie=Hash.extend({initialize:function(name,options){this.name=name;this.options=$extend({'autoSave':true},options||{});this.load()},save:function(){if(this.length==0){Cookie.remove(this.name,this.options);return true}var str=Json.toString(this.obj);if(str.length>4096)return false;Cookie.set(this.name,str,this.options);return true},load:function(){this.obj=Json.evaluate(Cookie.get(this.name),true)||{};this.setLength()}});Hash.Cookie.Methods={};['extend','set','merge','empty','remove'].each(function(method){Hash.Cookie.Methods[method]=function(){Hash.prototype[method].apply(this,arguments);if(this.options.autoSave)this.save();return this}});Hash.Cookie.implement(Hash.Cookie.Methods);var Modalizer=new Class({defaultModalStyle:{display:'block',position:'fixed',top:'0px',left:'0px','z-index':5000,'background-color':'#333',opacity:0.8},setModalOptions:function(options){this.modalOptions=$merge({width:(window.getScrollWidth()+300)+'px',height:(window.getScrollHeight()+300)+'px',elementsToHide:'select',onModalHide:Class.empty,onModalShow:Class.empty,hideOnClick:true,modalStyle:{},updateOnResize:true},this.modalOptions,options||{})},resize:function(){if($('modalOverlay')){$('modalOverlay').setStyles({width:(window.getScrollWidth()+300)+'px',height:(window.getScrollHeight()+300)+'px'})}},setModalStyle:function(styleObject){this.modalOptions.modalStyle=styleObject;this.modalStyle=$merge(this.defaultModalStyle,{width:this.modalOptions.width,height:this.modalOptions.height},styleObject);if($('modalOverlay'))$('modalOverlay').setStyles(this.modalStyle);return(this.modalStyle)},modalShow:function(options){this.setModalOptions(options||{});var overlay=null;if($('modalOverlay'))overlay=$('modalOverlay');if(!overlay)overlay=new Element('div').setProperty('id','modalOverlay').injectInside(document.body);overlay.setStyles(this.setModalStyle(this.modalOptions.modalStyle));if(window.ie6)overlay.setStyle('position','absolute');$('modalOverlay').removeEvents('click').addEvent('click',function(){this.modalHide(this.modalOptions.hideOnClick)}.bind(this));this.bound=this.bound||{};if(!this.bound.resize&&this.modalOptions.updateOnResize){this.bound.resize=this.resize.bind(this);window.addEvent('resize',this.bound.resize)}this.modalOptions.onModalShow();this.togglePopThroughElements(0);overlay.setStyle('display','block');return this},modalHide:function(override){if(override===false)return false;this.togglePopThroughElements(1);this.modalOptions.onModalHide();if($('modalOverlay'))$('modalOverlay').setStyle('display','none');if(this.modalOptions.updateOnResize){this.bound=this.bound||{};if(!this.bound.resize)this.bound.resize=this.resize.bind(this);window.removeEvent('resize',this.bound.resize)}return this},togglePopThroughElements:function(opacity){if((window.ie6||(window.gecko&&navigator.userAgent.test('mac','i')))){$$(this.modalOptions.elementsToHide).each(function(sel){sel.setStyle('opacity',opacity)})}}});var modalizer=Modalizer;function stickyWinHTML(caption,body,options){options=$merge({width:'300px',css:"div.DefaultStickyWin div.body{font-family:verdana; font-size:11px; line-height: 13px;}"+"div.DefaultStickyWin div.top_ul{background:url(%baseHref%full.png) top left no-repeat; height:30px; width:15px; float:left}"+"div.DefaultStickyWin div.top_ur{position:relative; left:0px !important; left:-4px; background:url(%baseHref%full.png) top right !important; height:30px; margin:0px 0px 0px 15px !important; margin-right:-4px; padding:0px}"+"div.DefaultStickyWin h1.caption{margin:0px 5px 0px 0px; overflow: hidden; padding:0; font-weight:bold; color:#555; font-size:14px; position:relative; top:8px; left:5px; float: left; height: 22px;}"+"div.DefaultStickyWin div.middle, div.DefaultStickyWin div.closeBody {background:url(%baseHref%body.png) top left repeat-y; margin:0px 20px 0px 0px !important;	margin-bottom: -3px; position: relative;	top: 0px !important; top: -3px;}"+"div.DefaultStickyWin div.body{background:url(%baseHref%body.png) top right repeat-y; padding:8px 30px 8px 0px; margin-left:5px; position:relative; right:-20px}"+"div.DefaultStickyWin div.bottom{clear:both}"+"div.DefaultStickyWin div.bottom_ll{background:url(%baseHref%full.png) bottom left no-repeat; width:15px; height:15px; float:left}"+"div.DefaultStickyWin div.bottom_lr{background:url(%baseHref%full.png) bottom right; position:relative; left:0px !important; left:-4px; margin:0px 0px 0px 15px !important; margin-right:-4px; height:15px}"+"div.DefaultStickyWin div.closeButtons{text-align: center; background:url(%baseHref%body.png) top right repeat-y; padding: 0px 30px 8px 0px; margin-left:5px; position:relative; right:-20px}"+"div.DefaultStickyWin a.button:hover{background:url(%baseHref%big_button_over.gif) repeat-x}"+"div.DefaultStickyWin a.button {background:url(%baseHref%big_button.gif) repeat-x; margin: 2px 8px 2px 8px; padding: 2px 12px; cursor:pointer; border: 1px solid #999 !important; text-decoration:none; color: #000 !important;}"+"div.DefaultStickyWin div.closeButton{width:13px; height:13px; background:url(%baseHref%closebtn.gif) no-repeat; position: absolute; right: 0px; margin:10px 15px 0px 0px !important; cursor:pointer}"+"div.DefaultStickyWin div.dragHandle {	width: 11px;	height: 25px;	position: relative;	top: 5px;	left: -3px;	cursor: move;	background: url(%baseHref%drag_corner.gif); float: left;}",cornerHandle:false,cssClass:'',baseHref:'http://www.cnet.com/html/rb/assets/global/stickyWinHTML/',buttons:[]},options);if(options.confirmTxt)options.buttons.push({text:options.confirmTxt,onClick:options.onConfirm||Class.empty});if(options.closeTxt)options.buttons.push({text:options.closeTxt,onClick:options.onClose||Class.empty});window.addEvent('domready',function(){try{if(!$('defaultStickyWinStyle')){var css=simpleTemplateParser.parseTemplate(options.css,options);if(window.ie)css=css.replace(new RegExp('png','gi'),'gif');var styler=new Element('style').setProperty('id','defaultStickyWinStyle').injectInside($$('head')[0]);if(!styler.setText.attempt(css,styler))styler.appendText(css)}}catch(e){dbug.log('error: %s',e)}}.bind(this));caption=$pick(caption,'%caption%');body=$pick(body,'%body%');var container=new Element('div').setStyle('width',options.width).addClass('DefaultStickyWin');if(options.cssClass)container.addClass(options.cssClass);var h1Caption=new Element('h1').addClass('caption').setStyle('width',(options.width.toInt()-(options.cornerHandle?70:60))+'px');if($(caption))h1Caption.adopt(caption);else h1Caption.setHTML(caption);var bodyDiv=new Element('div').addClass('body');if($(body))bodyDiv.adopt(body);else bodyDiv.setHTML(body);var top_ur=new Element('div').addClass('top_ur').adopt(new Element('div').addClass('closeButton').addClass('closeSticky')).adopt(h1Caption);if(options.cornerHandle){new Element('div').addClass('dragHandle').injectTop(top_ur)}else{h1Caption.addClass('dragHandle')}container.adopt(new Element('div').addClass('top').adopt(new Element('div').addClass('top_ul')).adopt(top_ur));container.adopt(new Element('div').addClass('middle').adopt(bodyDiv));if(options.buttons.length>0){var closeButtons=new Element('div').addClass('closeButtons');options.buttons.each(function(button){if(button.properties&&button.properties.className){button.properties['class']=button.properties.className;delete button.properties.className}var properties=$merge({'class':'closeSticky'},button.properties);new Element('a').addEvent('click',button.onClick||Class.empty).appendText(button.text).injectInside(closeButtons).setProperties(properties).addClass('button')});container.adopt(new Element('div').addClass('closeBody').adopt(closeButtons))}container.adopt(new Element('div').addClass('bottom').adopt(new Element('div').addClass('bottom_ll')).adopt(new Element('div').addClass('bottom_lr')));return container};var StickyWin=new Class({options:{onDisplay:Class.empty,onClose:Class.empty,closeClassName:'closeSticky',pinClassName:'pinSticky',content:'',zIndex:10000,className:'',edge:false,position:'center',offset:{x:0,y:0},relativeTo:document.body,width:false,height:false,timeout:-1,allowMultipleByClass:false,allowMultiple:true,showNow:true,useIframeShim:true,iframeShimSelector:''},css:'.SWclearfix:after {content: "."; display: block; height: 0; clear: both; visibility: hidden;}'+'.SWclearfix {display: inline-table;}'+'* html .SWclearfix {height: 1%;}'+'.SWclearfix {display: block;}',initialize:function(options){this.setOptions(options);this.id=this.options.id||'StickyWin_'+new Date().getTime();this.makeWindow();if(this.options.content)this.setContent(this.options.content);if(this.options.showNow)this.show();window.addEvent('domready',function(){try{if(!$('StickyWinClearfix')){var style=new Element('style').setProperty('id','StickyWinClearfix').injectInside($$('head')[0]);if(!style.setText.attempt(this.css,style))style.appendText(this.css)}}catch(e){dbug.log('error: %s',e)}}.bind(this))},makeWindow:function(){this.destroyOthers();if(!$(this.id)){this.win=new Element('div').setProperty('id',this.id).addClass(this.options.className).addClass('StickyWinInstance').addClass('SWclearfix').setStyles({'display':'none','position':'absolute','zIndex':this.options.zIndex}).injectInside(document.body)}else this.win=$(this.id);if(this.options.width&&$type(this.options.width.toInt())=="number")this.win.setStyle('width',this.options.width.toInt()+'px');if(this.options.height&&$type(this.options.height.toInt())=="number")this.win.setStyle('height',this.options.height.toInt()+'px');return this},show:function(){this.fireEvent('onDisplay');if(!this.positioned)this.position();this.showWin();if(this.options.useIframeShim)this.showIframeShim();this.visible=true;return this},showWin:function(){this.win.setStyle('display','block')},hide:function(){this.fireEvent('onClose');this.hideWin();if(this.options.useIframeShim)this.hideIframeShim();this.visible=false;return this},hideWin:function(){this.win.setStyle('display','none')},destroyOthers:function(){if(!this.options.allowMultipleByClass||!this.options.allowMultiple){$$('div.StickyWinInstance').each(function(sw){if(!this.options.allowMultiple||(!this.options.allowMultipleByClass&&sw.hasClass(this.options.className)))sw.remove()},this)}},setContent:function(html){if(this.win.getChildren().length>0)this.win.empty();if($type(html)=="string")this.win.setHTML(html);else if($(html))this.win.adopt(html);this.win.getElements('.'+this.options.closeClassName).each(function(el){el.addEvent('click',this.hide.bind(this))},this);this.win.getElements('.'+this.options.pinClassName).each(function(el){el.addEvent('click',this.togglepin.bind(this))},this);return this},position:function(){this.positioned=true;this.win.setPosition({relativeTo:this.options.relativeTo,position:this.options.position,offset:this.options.offset,edge:this.options.edge});if(this.shim)this.shim.position();return this},pin:function(pin){if(!this.win.pin){dbug.log('you must include element.pin.js!');return false}this.pinned=$pick(pin,true);return this.win.pin(pin)},unpin:function(){this.pin(false)},togglepin:function(){this.pin(!this.pinned)},makeIframeShim:function(){if(!this.shim){this.shim=new IframeShim({element:(this.options.iframeShimSelector)?this.win.getElement(this.options.iframeShimSelector):$('StickyWinOverlay')||this.win,display:false,name:'StickyWinShim'})}},showIframeShim:function(){if(this.options.useIframeShim){this.makeIframeShim();this.shim.show()}},hideIframeShim:function(){if(this.options.useIframeShim)this.shim.hide()},destroy:function(){this.win.remove();if(this.options.useIframeShim)this.shim.remove();if($('StickyWinOverlay'))$('StickyWinOverlay').remove()}});StickyWin.implement(new Options);StickyWin.implement(new Events);var stickyWin=StickyWin;var StickyWinFx=StickyWin.extend({options:{fade:true,fadeDuration:150,fadeTransition:Fx.Transitions.sineInOut,draggable:false,dragOptions:{},dragHandleSelector:'.dragHandle',resizable:false,resizeOptions:{},resizeHandleSelector:''},setContent:function(html){this.parent(html);if(this.options.draggable)this.makeDraggable();if(this.options.resizable)this.makeResizable();return this},hideWin:function(){if(this.options.fade)this.fade(0);else this.win.hide()},showWin:function(){if(this.options.fade)this.fade(1);else this.win.show()},fade:function(to){if(!this.fadeFx){this.win.setStyles({opacity:0,display:'block'});this.fadeFx=this.win.effect('opacity',{duration:this.options.fadeDuration,transition:this.options.fadeTransition})}if(to>0)this.win.setStyle('display','block');this.fadeFx.clearChain();this.fadeFx.start(to).chain(function(){if(to==0)this.win.setStyle('display','none')}.bind(this));return this},makeDraggable:function(){dbug.log('you must include Drag.js, cannot make draggable')},makeResizable:function(){dbug.log('you must include Drag.js, cannot make resizable')}});if(typeof Drag!="undefined"){StickyWinFx.implement({makeDraggable:function(){var toggled=this.toggleVisible(true);if(this.options.useIframeShim){this.makeIframeShim();var dragComplete=this.options.dragOptions.onComplete||Class.empty;this.options.dragOptions.onComplete=function(){dragComplete();this.shim.position()}.bind(this)}if(this.options.dragHandleSelector){var handle=this.win.getElement(this.options.dragHandleSelector);if(handle){handle.setStyle('cursor','move');this.options.dragOptions.handle=handle}}this.win.makeDraggable(this.options.dragOptions);if(toggled)this.toggleVisible(false)},makeResizable:function(){var toggled=this.toggleVisible(true);if(this.options.useIframeShim){this.makeIframeShim();var resizeComplete=this.options.resizeOptions.onComplete||Class.empty;this.options.resizeOptions.onComplete=function(){resizeComplete();this.shim.position()}.bind(this)}if(this.options.resizeHandleSelector){var handle=this.win.getElement(this.options.resizeHandleSelector);if(handle)this.options.resizeOptions.handle=this.win.getElement(this.options.resizeHandleSelector)}this.win.makeResizable(this.options.resizeOptions);if(toggled)this.toggleVisible(false)},toggleVisible:function(show){if(!this.visible&&window.khtml&&$pick(show,true)){this.win.setStyles({display:'block',opacity:0});return true}else if(!$pick(show,false)){this.win.setStyles({display:'none',opacity:1});return false}return false}})}var modalWinBase={initialize:function(options){options=options||{};this.setModalOptions($merge(options.modalOptions||{},{onModalHide:function(){this.hide(false)}.bind(this)}));this.parent(options)},show:function(showModal){if($pick(showModal,true))this.modalShow();this.parent()},hide:function(hideModal){if($pick(hideModal,true))this.modalHide();this.parent()}};var StickyWinModal=StickyWin.extend(modalWinBase);StickyWinModal.implement(new Modalizer);var StickyWinFxModal=(typeof StickyWinFx!="undefined")?StickyWinFx.extend(modalWinBase):Class.empty;try{StickyWinFxModal.implement(new Modalizer())}catch(e){}var simpleErrorPopup=function(msghdr,msg,baseHref){baseHref=baseHref||"http://www.cnet.com/html/rb/assets/global/simple.error.popup";msg='<p class="errorMsg SWclearfix">'+'<img src="'+baseHref+'/simple.error.popup/icon_problems_sm.gif"'+' class="bang clearfix" style="float: left; width: 30px; height: 30px; margin: 3px 5px 5px 0px;">'+msg+'</p>';var body=stickyWinHTML(msghdr,msg,{width:'250px'});return new StickyWinModal({modalOptions:{modalStyle:{zIndex:11000}},zIndex:110001,content:body,position:'center'})};
/*	end packed code	*/
}
